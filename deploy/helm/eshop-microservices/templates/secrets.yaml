apiVersion: v1
kind: Secret
metadata:
  name: {{ include "eshop.fullname" . }}-secrets
  namespace: {{ .Values.global.namespace }}
  labels:
    {{- include "eshop.labels" . | nindent 4 }}
type: Opaque
stringData:
  # PostgreSQL passwords
  postgresql-catalog-password: {{ .Values.postgresql.catalogDb.password | quote }}
  postgresql-basket-password: {{ .Values.postgresql.basketDb.password | quote }}

  # SQL Server password
  sqlserver-sa-password: {{ .Values.sqlserver.saPassword | quote }}

  # RabbitMQ credentials
  rabbitmq-username: {{ .Values.rabbitmq.username | quote }}
  rabbitmq-password: {{ .Values.rabbitmq.password | quote }}

  # Connection strings (base64 encoded in actual secret)
  catalog-db-connection: {{ include "eshop.catalogDbConnectionString" . | quote }}
  basket-db-connection: {{ include "eshop.basketDbConnectionString" . | quote }}
  order-db-connection: {{ include "eshop.orderDbConnectionString" . | quote }}
  redis-connection: {{ include "eshop.redisConnectionString" . | quote }}
  rabbitmq-connection: {{ include "eshop.rabbitmqConnectionString" . | quote }}
  elasticsearch-url: {{ include "eshop.elasticsearchUrl" . | quote }}
  discount-grpc-url: {{ include "eshop.discountGrpcUrl" . | quote }}
